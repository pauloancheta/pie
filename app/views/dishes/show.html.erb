<center>
  <h2><%= @dish.name %></h2>
  <p><%= @dish.description %></p>
  <p><%= @dish.price %></p><hr>
</center>
  
<div class="col-md-5">
  <h3><center>Recipes for <%= @dish.name %></center></h3><hr>
  <ul id="sortable1" class="connectedSortable">
    <% @dish.recipes.each do |dr| %>
      <div class="ui-state" data-recipe-id="<%= dr.id %>" data-name="<%= dr.name %>"><center><%= dr.name %></center></div>
    <% end %>
  </ul>
</div>

<div class="col-md-2">
</div>

<div class="col-md-5">
  <h3><center>Add from list of recipes</center></h3><hr>
  <ul id="sortable2" class="connectedSortable">
      <% @recipes.each do |r| %>
        <% unless @dish.recipes.include?(r) %> 
          <div class="ui-state" data-recipe-id="<%= r.id %>" data-name="<%= r.name %>"><center><%= r.name %></center></div>
        <% end %>
      <% end %>
  </ul>
</div>

<script>
  $( "#sortable1" ).on( "sortreceive", function( event, ui ) {
      var recipeId = $(ui.item).data('recipe-id'),
              name = $(ui.item).data('name'),
               url = '/dishes/' + <%= @dish.id %> + '/add_recipe/' + recipeId;

      $.post(url, function(data){
        // alert("Added Successfully");
      });
  });

  $( "#sortable1" ).on( "sortremove", function( event, ui ) {
      var recipeId = $(ui.item).data('recipe-id'),
              name = $(ui.item).data('name'),
               url = '/dishes/' + <%= @dish.id %> + '/remove_recipe/' + recipeId;

      $.ajax({
          url: url,
          type: 'DELETE',
          success: function(result) {
            // alert("Removed");
          }
      });
  });
</script>
